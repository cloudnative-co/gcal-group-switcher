# Google Calendar Group Switcher

Googleカレンダーで複数人のカレンダー表示をグループ化して、ワンクリックで切り替えできるChrome拡張機能です。

## 概要

チームのアシスタントや日程調整を頻繁に行う方向けに開発された拡張機能です。異なるメンバーの組み合わせをグループとして保存し、必要に応じて素早く表示を切り替えることができます。

### 主な機能

- 📋 **カレンダーグループの作成・保存**: 複数のカレンダーを1つのグループとして保存
- 🔄 **ワンクリック切り替え**: 保存したグループをクリックするだけで表示切替
- ✏️ **グループの編集**: 作成済みグループのメンバーやグループ名を後から編集可能
- 🔀 **ドラッグ＆ドロップで並び替え**: グループの順番を自由に変更
- 📊 **グループの展開表示**: クリックでメンバー一覧を確認
- 👤 **自分のカレンダーのみ表示**: ワンクリックで自分のカレンダーだけを表示
- 🔍 **オートコンプリート機能**: メンバー入力時に既存のカレンダーから候補を表示

## 動作原理

この拡張機能は、Googleカレンダーのサイドバーに表示されているカレンダーのチェックボックスを自動的に操作することで、表示/非表示を切り替えます。そのため、事前にカレンダーがサイドバーに追加されている必要があります。

## インストール方法

### 開発者モードでのインストール

1. このリポジトリをクローンまたは[ダウンロード](https://github.com/cloudnative-co/gcal-group-switcher/archive/refs/heads/main.zip)
   ```bash
   git clone https://github.com/cloudnative-co/gcal-group-switcher.git
   cd gcal-group-switcher
   ```

2. Chromeで拡張機能管理ページを開く
   - Chrome のアドレスバーに `chrome://extensions/` を入力
   - または、メニュー → その他のツール → 拡張機能

3. 右上の「デベロッパーモード」をオンにする

4. 「パッケージ化されていない拡張機能を読み込む」をクリック

5. ダウンロードしたフォルダを選択（ZIPファイルの場合は解凍後のフォルダを選択）

## 使い方

### 前提条件

この拡張機能を使用するには、切り替えたいカレンダーが事前にGoogleカレンダーのサイドバーに追加されている必要があります。

#### カレンダーの追加方法

1. Googleカレンダーの左サイドバーで「他のカレンダー」の横にある「+」をクリック
2. 「カレンダーに登録」を選択
3. 追加したい人のメールアドレスを入力
4. カレンダーがサイドバーの「他のカレンダー」セクションに表示されることを確認

**重要**: 拡張機能は、サイドバーに表示されているカレンダーのチェックボックスを制御します。表示されていないカレンダーは操作できません。

### 基本的な使い方

1. **Googleカレンダーを開く**
   - https://calendar.google.com にアクセス
   - ページが完全に読み込まれるまで待つ

2. **拡張機能を起動**
   - ブラウザのツールバーにある拡張機能アイコンをクリック
   - ポップアップが表示される

3. **新規グループを作成**
   - グループ名を入力（例：「営業チーム会議」）
   - メンバーのカレンダー名を1行に1人ずつ入力
   - 入力中にオートコンプリートで候補が表示される
   - 「グループ作成」ボタンをクリック

4. **グループを適用**
   - 保存済みグループの「適用」ボタンをクリック
   - 自動的に指定したメンバーのカレンダーのみが表示される

### 高度な機能

#### グループの編集
- 各グループの「編集」ボタンをクリック
- グループ名やメンバーを変更
- 「グループ更新」ボタンで保存

#### グループの並び替え
- グループ左端のドットアイコンをドラッグ＆ドロップ
- よく使うグループを上に配置

#### メンバーの確認
- グループ名をクリックすると展開
- 全メンバーのリストが表示される

#### 自分のカレンダーのみ表示
- 上部の「自分のカレンダーのみ表示」ボタンをクリック
- 他のカレンダーが非表示になり、自分のカレンダーだけが表示される

### オートコンプリート機能

メンバー入力時に文字を入力すると、マイカレンダーおよび他のカレンダーに追加済みのカレンダーから候補が表示されます。

- ↑↓ キーで候補を選択
- Enter キーで確定
- Esc キーで候補リストを閉じる

## トラブルシューティング

### カレンダーが切り替わらない場合

1. Googleカレンダーのページをリロード（Ctrl+F5 または Cmd+Shift+R）
2. 拡張機能を再読み込み
   - `chrome://extensions/` で拡張機能の更新ボタン（🔄）をクリック

### ポップアップが開かない場合

まれにポップアップが開かないことがあります。以下の方法で解決できます：

1. **ブラウザの再起動**
   - Chromeを完全に終了して再起動

2. **拡張機能の再読み込み**
   - `chrome://extensions/` で更新ボタン（🔄）をクリック

3. **キャッシュのクリア**
   - Chromeの設定 → プライバシーとセキュリティ → 閲覧履歴データの削除

これはChrome拡張機能の既知の問題で、メモリリークやタブとの通信エラーが原因です。

### デバッグ情報の確認

拡張機能のポップアップ下部にある「デバッグ情報を表示」ボタンで、現在のカレンダー構造を確認できます。

## ファイル構成

```
gcal-group-switcher/
├── manifest.json        # 拡張機能の設定ファイル
├── background.js        # バックグラウンドサービスワーカー
├── popup.html          # ポップアップのHTML
├── popup.js            # ポップアップの動作ロジック
├── popup.css           # ポップアップのスタイル
├── content.js          # Googleカレンダーページで動作するスクリプト
├── content.css         # コンテンツスクリプト用のスタイル
├── icon.svg            # アイコン（SVG版）
├── icon16.png          # アイコン（16×16）
├── icon48.png          # アイコン（48×48）
├── icon128.png         # アイコン（128×128）
└── README.md           # このファイル
```

## 開発者向け情報

### 必要な権限

- `storage`: グループデータの保存
- `activeTab`: アクティブなタブへのアクセス
- `scripting`: スクリプトの実行
- `tabs`: タブ情報へのアクセス
- `host_permissions`: calendar.google.com へのアクセス

### 技術スタック

- Manifest V3
- Chrome Extension APIs
- Vanilla JavaScript
- CSS3

### バージョン履歴

- **v1.1.0** (最新)
  - グループの編集機能を追加
  - ドラッグ＆ドロップによる並び替え機能
  - グループの展開/折りたたみ機能
  - UIの改善（よりコンパクトに）
  - GitHubリンクをヘッダーに移動
- **v1.0.4**
  - グループの並び替え機能（矢印ボタン）を追加
- **v1.0.3**
  - 「自分のカレンダーのみ表示」機能を追加
- **v1.0.2**
  - ポップアップの安定性向上
  - バックグラウンドサービスワーカー追加
- **v1.0.0**
  - 初回リリース

### カスタマイズ

`content.js` のセレクタを変更することで、Googleカレンダーの構造変更に対応できます。

## 貢献

バグ報告や機能リクエストは [Issues](https://github.com/cloudnative-co/gcal-group-switcher/issues) までお願いします。

プルリクエストも歓迎します！

## ライセンス

MIT License

## 作者

[Cloud Native Inc.](https://github.com/cloudnative-co)

---

**注意**: この拡張機能は非公式のツールです。Google カレンダーの仕様変更により動作しなくなる可能性があります。